---
title: 构建您的第一个团队
description: 逐步教程，创建一个协作的 AI 团队，共同解决复杂问题。
icon: users-gear
---

## 释放协作 AI 的力量

想象一下，拥有一个由专业 AI 智能体组成的团队，他们无缝协作解决复杂问题，每个智能体都贡献自己的独特技能来实现共同目标。这就是 CrewAI 的力量——一个框架，让您能够创建协作的 AI 系统，可以完成远超单个 AI 能力的任务。

在本指南中，我们将创建一个研究团队（Crew），帮助我们研究和分析某个主题，然后创建一份综合报告。这个实际案例展示了 AI 智能体（Agents）如何协作完成复杂任务，但这仅仅是 CrewAI 可能性的开始。

### 您将构建和学习的内容

完成本指南后，您将：

1. **创建一个专业的 AI 研究团队**，具有明确的角色和职责
2. **编排多个 AI 智能体之间的协作**
3. **自动化复杂工作流**，包括信息收集、分析和报告生成
4. **建立基础技能**，可以应用于更雄心勃勃的项目

虽然我们在本指南中构建的是一个简单的研究团队，但相同的模式和技术可以应用于创建更复杂的团队，例如：

- 具有专业写作者、编辑和事实检查员的多阶段内容创作
- 具有分层支持智能体的复杂客户服务系统
- 自主的业务分析师，收集数据、创建可视化并生成见解
- 产品开发团队，进行构思、设计和规划实施

让我们开始构建您的第一个团队！

### 前提条件

开始之前，请确保您已：

1. 按照 [安装指南](/zh-Hans/installation) 安装了 CrewAI
2. 按照 [LLM 设置指南](/zh-Hans/concepts/llms#setting-up-your-llm) 在环境中设置了 LLM API 密钥
3. 具备 Python 基础知识

## 步骤 1：创建新的 CrewAI 项目

首先，让我们使用 CLI 创建一个新的 CrewAI 项目。此命令将设置完整的项目结构和所有必要文件，让您专注于定义智能体和任务，而不是设置样板代码。

```bash
crewai create crew research_crew
cd research_crew
```

这将生成一个具有团队所需基本结构的项目。CLI 自动创建：

- 带有必要文件的项目目录
- 智能体和任务的配置文件
- 基本的团队实现
- 运行团队的主脚本

<Frame caption="CrewAI 框架概览">
  <img src="/images/crews.png" alt="CrewAI 框架概览" />
</Frame>

## 步骤 2：探索项目结构

让我们花点时间了解 CLI 创建的项目结构。CrewAI 遵循 Python 项目的最佳实践，使您的代码在团队变得更复杂时易于维护和扩展。

```
research_crew/
├── .gitignore
├── pyproject.toml
├── README.md
├── .env
└── src/
    └── research_crew/
        ├── __init__.py
        ├── main.py
        ├── crew.py
        ├── tools/
        │   ├── custom_tool.py
        │   └── __init__.py
        └── config/
            ├── agents.yaml
            └── tasks.yaml
```

这种结构遵循 Python 项目的最佳实践，使代码组织变得容易。配置文件（YAML）与实现代码（Python）的分离使您可以轻松修改团队的行为，而无需更改底层代码。

## 步骤 3：配置您的智能体

现在到了有趣的部分——定义您的 AI 智能体！在 CrewAI 中，智能体（Agents）是具有特定角色、目标和背景故事的专业实体，这些要素塑造了它们的行为。可以把它们想象成戏剧中的角色，每个都有自己的个性和目的。

对于我们的研究团队，我们将创建两个智能体：

1. 一个**研究员（Researcher）**，擅长查找和组织信息
2. 一个**分析师（Analyst）**，能够解释研究发现并创建有见地的报告

让我们修改 `agents.yaml` 文件来定义这些专业智能体。确保将 `llm` 设置为您正在使用的提供商。

```yaml
# src/research_crew/config/agents.yaml
researcher:
  role: >
    {topic} 高级研究专家
  goal: >
    查找关于 {topic} 的全面准确信息，
    重点关注最新发展和关键见解
  backstory: >
    您是一位经验丰富的研究专家，擅长从各种来源查找相关信息。
    您精于以清晰结构化的方式组织信息，使复杂主题对他人变得易于理解。
  llm: provider/model-id # 例如 openai/gpt-4o, google/gemini-2.0-flash, anthropic/claude...

analyst:
  role: >
    {topic} 数据分析师和报告撰写者
  goal: >
    分析研究发现并创建全面、结构良好的报告，
    以清晰引人的方式呈现见解
  backstory: >
    您是一位技能娴熟的分析师，具有数据解释和技术写作背景。
    您擅长识别模式并从研究数据中提取有意义的见解，
    然后通过精心制作的报告有效地传达这些见解。
  llm: provider/model-id # 例如 openai/gpt-4o, google/gemini-2.0-flash, anthropic/claude...
```

注意每个智能体都有独特的角色、目标和背景故事。这些要素不仅仅是描述性的——它们积极塑造智能体处理任务的方式。通过精心制作这些要素，您可以创建具有专业技能和视角的智能体，它们相互补充。

## 步骤 4：定义您的任务

定义了智能体后，我们现在需要给它们具体的任务（Tasks）来执行。CrewAI 中的任务代表智能体将执行的具体工作，包含详细说明和预期输出。

对于我们的研究团队，我们将定义两个主要任务：

1. 用于收集综合信息的**研究任务**
2. 用于创建有见地报告的**分析任务**

让我们修改 `tasks.yaml` 文件：

```yaml
# src/research_crew/config/tasks.yaml
research_task:
  description: >
    对 {topic} 进行彻底研究。重点关注：
    1. 关键概念和定义
    2. 历史发展和最新趋势
    3. 主要挑战和机遇
    4. 显著应用或案例研究
    5. 未来展望和潜在发展

    确保以结构化格式组织您的发现，包含清晰的部分。
  expected_output: >
    一份全面的研究文档，包含涵盖 {topic} 所有请求方面的组织良好的部分。
    在相关处包含具体事实、数据和示例。
  agent: researcher

analysis_task:
  description: >
    分析研究发现并创建关于 {topic} 的综合报告。
    您的报告应该：
    1. 以执行摘要开始
    2. 包含研究中的所有关键信息
    3. 提供对趋势和模式的深入分析
    4. 提供建议或未来考虑
    5. 采用专业、易读的格式，包含清晰的标题
  expected_output: >
    一份关于 {topic} 的精美专业报告，呈现研究发现以及增值分析和见解。
    报告应结构良好，包含执行摘要、主要部分和结论。
  agent: analyst
  context:
    - research_task
  output_file: output/report.md
```

注意分析任务中的 `context` 字段——这是一个强大的功能，允许分析师访问研究任务的输出。这创建了一个工作流，其中信息在智能体之间自然流动，就像人类团队中一样。

## 步骤 5：配置您的团队

现在是时候通过配置我们的团队将一切整合在一起了。团队（Crew）是编排智能体如何协作完成任务的容器。

让我们修改 `crew.py` 文件：

```python
# src/research_crew/crew.py
from crewai import Agent, Crew, Process, Task
from crewai.project import CrewBase, agent, crew, task
from crewai_tools import SerperDevTool
from crewai.agents.agent_builder.base_agent import BaseAgent
from typing import List

@CrewBase
class ResearchCrew():
    """用于综合主题分析和报告的研究团队"""

    agents: List[BaseAgent]
    tasks: List[Task]

    @agent
    def researcher(self) -> Agent:
        return Agent(
            config=self.agents_config['researcher'], # type: ignore[index]
            verbose=True,
            tools=[SerperDevTool()]
        )

    @agent
    def analyst(self) -> Agent:
        return Agent(
            config=self.agents_config['analyst'], # type: ignore[index]
            verbose=True
        )

    @task
    def research_task(self) -> Task:
        return Task(
            config=self.tasks_config['research_task'] # type: ignore[index]
        )

    @task
    def analysis_task(self) -> Task:
        return Task(
            config=self.tasks_config['analysis_task'], # type: ignore[index]
            output_file='output/report.md'
        )

    @crew
    def crew(self) -> Crew:
        """创建研究团队"""
        return Crew(
            agents=self.agents,
            tasks=self.tasks,
            process=Process.sequential,
            verbose=True,
        )
```

在这段代码中，我们：

1. 创建研究员智能体并为其配备 SerperDevTool 来搜索网络
2. 创建分析师智能体
3. 设置研究和分析任务
4. 配置团队按顺序运行任务（分析师将等待研究员完成）

这就是魔法发生的地方——只需几行代码，我们就定义了一个协作的 AI 系统，其中专业智能体在协调的过程中协同工作。

## 步骤 6：设置主脚本

现在，让我们设置运行团队的主脚本。这里我们提供希望团队研究的具体主题。

```python
#!/usr/bin/env python
# src/research_crew/main.py
import os
from research_crew.crew import ResearchCrew

# 如果输出目录不存在则创建
os.makedirs('output', exist_ok=True)

def run():
    """
    运行研究团队。
    """
    inputs = {
        'topic': '医疗保健中的人工智能'
    }

    # 创建并运行团队
    result = ResearchCrew().crew().kickoff(inputs=inputs)

    # 打印结果
    print("\n\n=== 最终报告 ===\n\n")
    print(result.raw)

    print("\n\n报告已保存到 output/report.md")

if __name__ == "__main__":
    run()
```

此脚本准备环境，指定我们的研究主题，并启动团队的工作。CrewAI 的强大之处在于代码的简单性——管理多个 AI 智能体的所有复杂性都由框架处理。

## 步骤 7：设置环境变量

在项目根目录创建 `.env` 文件，包含您的 API 密钥：

```sh
SERPER_API_KEY=your_serper_api_key
# 在这里也添加您的提供商 API 密钥。
```

有关配置您选择的提供商的详细信息，请参见 [LLM 设置指南](/zh-Hans/concepts/llms#setting-up-your-llm)。您可以从 [Serper.dev](https://serper.dev/) 获取 Serper API 密钥。

## 步骤 8：安装依赖项

使用 CrewAI CLI 安装所需依赖项：

```bash
crewai install
```

此命令将：

1. 从项目配置中读取依赖项
2. 如果需要则创建虚拟环境
3. 安装所有必需的包

## 步骤 9：运行您的团队

现在到了激动人心的时刻——是时候运行您的团队并见证 AI 协作的实际行动！

```bash
crewai run
```

当您运行此命令时，您将看到您的团队活跃起来。研究员将收集关于指定主题的信息，然后分析师将基于该研究创建综合报告。您将实时看到智能体的思考过程、行动和输出，看到它们协作完成任务。

## 步骤 10：查看输出

团队完成工作后，您将在 `output/report.md` 文件中找到最终报告。报告将包括：

1. 执行摘要
2. 关于主题的详细信息
3. 分析和见解
4. 建议或未来考虑

花一点时间欣赏您所完成的工作——您创建了一个系统，其中多个 AI 智能体在复杂任务上协作，每个都贡献自己的专业技能来产生超越任何单个智能体所能达到的结果。

## 探索其他 CLI 命令

CrewAI 提供了几个其他有用的 CLI 命令来处理团队：

```bash
# 查看所有可用命令
crewai --help

# 运行团队
crewai run

# 测试团队
crewai test

# 重置团队记忆
crewai reset-memories

# 从特定任务重播
crewai replay -t <task_id>
```

## 可能性的艺术：超越您的第一个团队

您在本指南中构建的内容只是开始。您学到的技能和模式可以应用于创建越来越复杂的 AI 系统。以下是您可以扩展这个基本研究团队的一些方法：

### 扩展您的团队

您可以向团队添加更多专业智能体：

- **事实检查员**来验证研究发现
- **数据可视化专家**来创建图表和图形
- 在特定领域具有专业知识的**领域专家**
- **评论家**来识别分析中的弱点

### 添加工具和功能

您可以通过额外工具增强智能体：

- 用于实时研究的网络浏览工具
- 用于数据分析的 CSV/数据库工具
- 用于数据处理的代码执行工具
- 与外部服务的 API 连接

### 创建更复杂的工作流

您可以实现更复杂的流程：

- 分层流程，其中管理员智能体委派给工作智能体
- 具有改进反馈循环的迭代流程
- 多个智能体同时工作的并行流程
- 基于中间结果自适应的动态流程

### 应用于不同领域

相同的模式可以应用于创建以下团队：

- **内容创作**：写作者、编辑、事实检查员和设计师协作
- **客户服务**：分诊智能体、专家和质量控制协作
- **产品开发**：研究员、设计师和规划师协作
- **数据分析**：数据收集员、分析师和可视化专家

## 下一步

现在您已经构建了第一个团队，您可以：

1. 尝试不同的智能体配置和个性
2. 尝试更复杂的任务结构和工作流
3. 实现自定义工具，为您的智能体提供新功能
4. 将您的团队应用于不同的主题或问题领域
5. 探索 [CrewAI 流程](/zh-Hans/guides/flows/first-flow) 以获得具有程序化编程的更高级工作流

<Check>
  恭喜！您已成功构建了第一个 CrewAI
  团队，可以研究和分析您提供的任何主题。这一基础经验为您提供了创建越来越复杂的
  AI 系统的技能，这些系统可以通过协作智能解决复杂的多阶段问题。
</Check>{" "}
